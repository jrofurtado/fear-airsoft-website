// Auto-generated from index.html.
// DO NOT EDIT.

library model;

import 'dart:html' as autogenerated;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;
import 'dart:html';
import 'dart:json';
import 'dart:async';
import 'package:web_ui/web_ui.dart';
import 'package:js/js.dart' as js;
import 'package:web_ui/watcher.dart' as watchers;
import '../DARTJsonP.dart';
import 'x-siteheader.dart';
import 'x-sitenavigation.dart';
import 'x-pagina-clube.dart';
import 'x-pagina-anuncios.dart';
import 'x-pagina-jogos.html.dart';
import 'x-pagina-membros.dart';
import 'x-pagina-equipas.html.dart';
import 'x-pagina-galeria.dart';
import 'x-pagina-forum.html.dart';
import 'x-pagina-inscricoes.html.dart';
import 'x-pagina-documentos.html.dart';
import 'x-pagina-contas.dart';
import 'x-sitefooter.dart';


// Original code


class Model{
  static final String endpoint_imagens = "https://www.googledrive.com/host/0B4Nj2G61OMg-NXI4c3dyLU4wVzA/";
  static final String endpoint_jsonp = "https://www.googledrive.com/host/0B4Nj2G61OMg-OGgtdXdGei1zR2M/";
  static final String endpoint_json ="http://fear-airsoft.appspot.com/json/publishedData/";
  static final String endpoint_weather_json="http://free.worldweatheronline.com/feed/weather.ashx?q=37.77,-25.58&format=json&num_of_days=5&key=795c730da3133229131502";
  static final String endpoint_weather_jsonp="http://free.worldweatheronline.com/feed/weather.ashx?q=37.77,-25.58&format=json&num_of_days=5&key=795c730da3133229131502";
  static final useJsonP=false;
  static final useWeatherJsonP=true;
  
  Collection<NavLink> navlinks = [
                         NavLink.Clube,
                         NavLink.Anuncios,
                         NavLink.Jogos,
                         NavLink.Membros,
                         NavLink.Equipas,
                         NavLink.Galeria,
                         NavLink.Forum,
                         NavLink.Inscricoes,
                         NavLink.Documentos,
                         NavLink.Contas
                         ];
  String hash = window.location.hash;
  String href = window.location.href;
  String mainPage = window.location.protocol.concat("//").concat(window.location.host).concat(window.location.pathname);
  String emblemaSeleccionado;
  Map _weather;
  Map get weather {
    if(_weather==null){
      _weather={'data':{'weather':[]}};
      if(!useWeatherJsonP)
        HttpRequest.request("${endpoint_weather_json}").then((req){model._weather=parse(req.responseText);watchers.dispatch();});
      else  
        new JsonpCallback("weatherFunction").doCallback("${endpoint_weather_jsonp}&callback=weatherFunction").then((var data){model._weather=data;watchers.dispatch();});
    }
    return _weather;
  }
  List<Map> _membros;
  List<Map> get membros {
    if(_membros==null){
      _membros=[];
      if(!useJsonP)
        HttpRequest.request("${endpoint_json}membros").then((req){model._membros=parse(req.responseText);watchers.dispatch();});
      else  
        new JsonpCallback("membrosFunction").doCallback("${endpoint_jsonp}membrosP?callback=membrosFunction").then((var data){model._membros=data;watchers.dispatch();});
    }
    return _membros;
  }
  List<List> _equipes;
  List<List> get equipes {
    if(equipes==null){
      _equipes=[];
      if(!useJsonP)
        HttpRequest.request("${endpoint_json}equipes").then((req){model._equipes=parse(req.responseText);watchers.dispatch();});
      else  
        new JsonpCallback("equipesFunction").doCallback("${endpoint_jsonp}equipesP?callback=equipesFunction").then((var data){model._equipes=data;watchers.dispatch();});
    }
    return _equipes;
  }
  Map _emblemas;
  Map get emblemas {
    if(_emblemas==null){
      _emblemas={"emblemas":[],"patentes":[]};
      if(!useJsonP)
        HttpRequest.request("${endpoint_json}emblemas").then((req){model._emblemas=parse(req.responseText);watchers.dispatch();});
      else
        new JsonpCallback("emblemasFunction").doCallback("${endpoint_jsonp}emblemasP?callback=emblemasFunction").then((var data){model._emblemas=data;watchers.dispatch();});
    }
    return _emblemas;
  }
  List<Map> _galeria;
  List<Map> get galeria {
    if(_galeria==null){
      _galeria=[];
      if(!useJsonP)
        HttpRequest.request("${endpoint_json}galeria").then((req){model._galeria=parse(req.responseText);watchers.dispatch();});
      else  
        new JsonpCallback("galeriaFunction").doCallback("${endpoint_jsonp}galeriaP?callback=galeriaFunction").then((var data){model._galeria=data;watchers.dispatch();});
    }
    return _galeria;
  }
  List<Map> _anuncios;
  List<Map> get anuncios {
    if(_anuncios==null){
      _anuncios=[];
      if(!useJsonP)
        HttpRequest.request("${endpoint_json}anuncios").then((req){model._anuncios=parse(req.responseText);watchers.dispatch();});
      else  
        new JsonpCallback("anunciosFunction").doCallback("${endpoint_jsonp}anunciosP?callback=anunciosFunction").then((var data){model._anuncios=data;watchers.dispatch();});
    }
    return _anuncios;
  }

  changePage(String link) {    
    model.mainPage=window.location.protocol.concat("//").concat(window.location.host).concat(window.location.pathname);
    model.href=mainPage.concat(link);
    model.hash=link;
  }
}

Model model = new Model();

class NavLink {
  static final NavLink Clube = new NavLink("Clube","#/clube");
  static final NavLink Anuncios = new NavLink("Anuncios","#/anuncios");
  static final NavLink Jogos = new NavLink("Jogos", "#/jogos");
  static final NavLink Membros = new NavLink("Membros", "#/membros");
  static final NavLink Equipas = new NavLink("Equipas", "#/equipas");
  static final NavLink Galeria = new NavLink("Galeria", "#/galeria");
  static final NavLink Forum = new NavLink("Fórum", "#/forum.html");
  static final NavLink Inscricoes = new NavLink("Inscrições", "#/inscricoes");
  static final NavLink Documentos = new NavLink("Links", "#/documentos");
  static final NavLink Contas = new NavLink("Contas", "#/contas");
  String name;
  String link;
  
  NavLink(this.name, this.link);
}

void main() {
//  useShadowDom = true; // to enable use of experimental Shadow DOM in the browser
  updateFilters(e) {
    model.mainPage=window.location.protocol.concat("//").concat(window.location.host).concat(window.location.pathname);    
    model.hash=window.location.hash;
    model.href=window.location.href;
    watchers.dispatch();
  }
  window.onHashChange.listen(updateFilters);
  window.onPopState.listen(updateFilters);
}
// Additional generated code
void init_autogenerated() {
  var _root = autogenerated.document.body;
  var __e0, __e1, __e11, __e13, __e15, __e17, __e19, __e21, __e22, __e3, __e5, __e7, __e9;
  var __t = new autogenerated.Template(_root);
  __e0 = _root.query('#__e-0');
  new SiteHeader.forElement(__e0);
  __t.component(__e0);
  __e1 = _root.query('#__e-1');
  new SiteNavigation.forElement(__e1);
  __t.component(__e1);
  __e3 = _root.query('#__e-3');
  __t.conditional(__e3, () => model.hash==''||model.hash.startsWith(NavLink.Clube.link), (__t) {
    var __e2;
    __e2 = new autogenerated.Element.tag('x-pagina-clube');
    new PaginaClube.forElement(__e2);
    __t.component(__e2);
  __t.add(__e2);
  });

  __e5 = _root.query('#__e-5');
  __t.conditional(__e5, () => model.hash.startsWith(NavLink.Anuncios.link), (__t) {
    var __e4;
    __e4 = new autogenerated.Element.tag('x-pagina-anuncios');
    new PaginaAnuncios.forElement(__e4);
    __t.component(__e4);
  __t.add(__e4);
  });

  __e7 = _root.query('#__e-7');
  __t.conditional(__e7, () => model.hash.startsWith(NavLink.Jogos.link), (__t) {
    var __e6;
    __e6 = new autogenerated.Element.tag('x-pagina-jogos');
    new PaginaJogos.forElement(__e6);
    __t.component(__e6);
  __t.add(__e6);
  });

  __e9 = _root.query('#__e-9');
  __t.conditional(__e9, () => model.hash.startsWith(NavLink.Membros.link), (__t) {
    var __e8;
    __e8 = new autogenerated.Element.tag('x-pagina-membros');
    new PaginaMembros.forElement(__e8);
    __t.component(__e8);
  __t.add(__e8);
  });

  __e11 = _root.query('#__e-11');
  __t.conditional(__e11, () => model.hash.startsWith(NavLink.Equipas.link), (__t) {
    var __e10;
    __e10 = new autogenerated.Element.tag('x-pagina-equipas');
    new PaginaEquipas.forElement(__e10);
    __t.component(__e10);
  __t.add(__e10);
  });

  __e13 = _root.query('#__e-13');
  __t.conditional(__e13, () => model.hash.startsWith(NavLink.Galeria.link), (__t) {
    var __e12;
    __e12 = new autogenerated.Element.tag('x-pagina-galeria');
    new PaginaGaleria.forElement(__e12);
    __t.component(__e12);
  __t.add(__e12);
  });

  __e15 = _root.query('#__e-15');
  __t.conditional(__e15, () => model.hash.startsWith(NavLink.Forum.link), (__t) {
    var __e14;
    __e14 = new autogenerated.Element.tag('x-pagina-forum');
    new PaginaForum.forElement(__e14);
    __t.component(__e14);
  __t.add(__e14);
  });

  __e17 = _root.query('#__e-17');
  __t.conditional(__e17, () => model.hash.startsWith(NavLink.Inscricoes.link), (__t) {
    var __e16;
    __e16 = new autogenerated.Element.tag('x-pagina-inscricoes');
    new PaginaInscricoes.forElement(__e16);
    __t.component(__e16);
  __t.add(__e16);
  });

  __e19 = _root.query('#__e-19');
  __t.conditional(__e19, () => model.hash.startsWith(NavLink.Documentos.link), (__t) {
    var __e18;
    __e18 = new autogenerated.Element.tag('x-pagina-documentos');
    new PaginaDocumentos.forElement(__e18);
    __t.component(__e18);
  __t.add(__e18);
  });

  __e21 = _root.query('#__e-21');
  __t.conditional(__e21, () => model.hash.startsWith(NavLink.Contas.link), (__t) {
    var __e20;
    __e20 = new autogenerated.Element.tag('x-pagina-contas');
    new PaginaContas.forElement(__e20);
    __t.component(__e20);
  __t.add(__e20);
  });

  __e22 = _root.query('#__e-22');
  new SiteFooter.forElement(__e22);
  __t.component(__e22);
  __t.create();
  __t.insert();
}

//@ sourceMappingURL=model.dart.map